{% extends 'base.html.twig' %}


{% block title %}Hello MainController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    {# <h1>Hello {{ controller_name }}! ✅</h1> #}

    <h1>TASKS✅</h1>
    {% if app.user %}
        
        You are logged in as {{ app.user.username  }}, <a href="{{ path('app_logout') }}">Logout</a>
        
    {% else %}
        <a href="/login">Login </a> -
        <a href="/register"> Registration</a>
        
    {% endif %}
         
    {% if is_granted("ROLE_ADMIN")%}
        - <a href="/articulo"> Crear/Modificar Articulos</a>
        - <a href="/user">Editar Usuarios</a> 
    {% endif %}

    <br><br>

    {% if app.user %}

        {% for task in taskAsignments %}

            <ul>
                <li>
                    Nombre:{{task.event.name}}<br>

                    <a href="{{ path('app_task_edit', {'id': task.id, 'state': 1}) }}"><button type="button" >Comenzar Tarea</button></a>

                    {% if (task.getStateRequest()=== 1) %}    
                        
                        {# <a href="{{ path('app_task_edit', {'id': task.id, 'state': 2}) }}"><button type="button" >Parar Tarea</button></a> #}

                    {% endif %}
                </li>

            
            </ul>


        {% endfor %}
        
        {% for task in tasks %}

            <ul>
                <li>
                    Nombre:{{task.event.name}}<br>

                    <a href="{{ path('app_task_edit', {'id': task.id, 'state': 1}) }}"><button type="button" >ACEPTAR</button></a>
                    <a href="{{ path('app_task_edit', {'id': task.id, 'state': 2}) }}"><button type="button" >RECHAZAR</button></a>

                    
                </li>

            
            </ul>


        {% endfor %}
    {% endif %}
    
        

    

</div>

{% endblock %}
   